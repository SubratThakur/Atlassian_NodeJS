#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

# Get the current Node.js version from Volta configuration
REQUIRED_NODE_VERSION=$(node -p "require('./package.json').volta.node")
CURRENT_NODE_VERSION=$(node -v | sed 's/v//')

echo "Checking Node.js version..."
if [ "$CURRENT_NODE_VERSION" != "$REQUIRED_NODE_VERSION" ]; then
    echo "⚠️  Warning: Current Node.js version ($CURRENT_NODE_VERSION) doesn't match the required version ($REQUIRED_NODE_VERSION)"
    echo "Please run: volta install node@$REQUIRED_NODE_VERSION"
fi

# Check if package.json has changed
if [ -f package.json ]; then
    echo "Checking for dependency changes..."
    npm install
fi 